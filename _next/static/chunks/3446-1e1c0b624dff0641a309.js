(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3446],{39212:function(e,t,n){"use strict";n.d(t,{Z:function(){return te}});var r=n(85893),a=n(59999),i=n(809),c=n.n(i),o=n(92447),s=n(26265),u=n(80711),d=n(67294),l=n(96365),p=n(48142),_=n(96486),f=n(11163),m=n(60248),h=n(90524),v=n(86644),g=(n(9008),n(56732)),x=n(64895),b=n(17429),k=n(96630),Z=n(75037),w=n(44868),y=n(80202),C=n(42012),S=n(97926),P=n(62497),T=n(45127),A=n(43830),E=n(28945),O=n(47131),N=n(89039),j=n(89627),D=n(83325),I=n(2544),L=n(65863),M=n(72418),q=n(64407);function U(e){var t=e.listData,n=e.setProductSelect,a=e.addToCart,i=e.productCart,s=e.updateCart,l=e.isTagHide,_=(0,p.$)().t,f=(0,d.useState)([]),m=f[0],h=f[1],x=(0,d.useState)([]),b=x[0],k=x[1],Z=(0,d.useState)(0),w=(Z[0],Z[1]),y=function(e){w(e);var t=document.getElementById("product-tag-".concat(e));t&&t.scrollIntoView({behavior:"smooth",block:"center"})},C=function(){var e=(0,o.Z)(c().mark((function e(t){var r,a,i,o,s,d,l,p,_,f,m,h,g,x,b,k,Z,w,y,C,S,P;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!0,a=!1,e.prev=2,o=(0,u.Z)(t.variants);case 4:return e.next=6,o.next();case 6:return s=e.sent,r=s.done,e.next=10,s.value;case 10:if(d=e.sent,r){e.next=96;break}if(l=d,!L.Z.isAvailable(l)){e.next=93;break}p=[],t.optionSelects=[],t.variantSelect=l,_=!0,f=!1,e.prev=19,h=(0,u.Z)(t.up_sell_variants);case 21:return e.next=23,h.next();case 23:return g=e.sent,_=g.done,e.next=27,g.value;case 27:if(x=e.sent,_){e.next=34;break}x.isCheck=!1;case 31:_=!0,e.next=21;break;case 34:e.next=40;break;case 36:e.prev=36,e.t0=e.catch(19),f=!0,m=e.t0;case 40:if(e.prev=40,e.prev=41,_||null==h.return){e.next=45;break}return e.next=45,h.return();case 45:if(e.prev=45,!f){e.next=48;break}throw m;case 48:return e.finish(45);case 49:return e.finish(40);case 50:if(t.quantitySelect=1,t.variantSelect.min_buy&&(t.quantitySelect=t.variantSelect.min_buy),!v.ZP.listTypeService.includes(t.type)){e.next=55;break}return n(t),e.abrupt("return");case 55:if(!t.variantSelect.options){e.next=90;break}b=!0,k=!1,e.prev=58,w=(0,u.Z)(t.variantSelect.options);case 60:return e.next=62,w.next();case 62:return y=e.sent,b=y.done,e.next=66,y.value;case 66:if(C=e.sent,b){e.next=74;break}P={name:(S=C).option_name,option_id:S.option_id,value:S.option_value_value.name,option_value_id:S.option_value_id},p.push(P);case 71:b=!0,e.next=60;break;case 74:e.next=80;break;case 76:e.prev=76,e.t1=e.catch(58),k=!0,Z=e.t1;case 80:if(e.prev=80,e.prev=81,b||null==w.return){e.next=85;break}return e.next=85,w.return();case 85:if(e.prev=85,!k){e.next=88;break}throw Z;case 88:return e.finish(85);case 89:return e.finish(80);case 90:return t.optionSelects=p,n(t),e.abrupt("break",96);case 93:r=!0,e.next=4;break;case 96:e.next=102;break;case 98:e.prev=98,e.t2=e.catch(2),a=!0,i=e.t2;case 102:if(e.prev=102,e.prev=103,r||null==o.return){e.next=107;break}return e.next=107,o.return();case 107:if(e.prev=107,!a){e.next=110;break}throw i;case 110:return e.finish(107);case 111:return e.finish(102);case 112:case"end":return e.stop()}}),e,null,[[2,98,102,112],[19,36,40,50],[41,,45,49],[58,76,80,90],[81,,85,89],[103,,107,111]])})));return function(t){return e.apply(this,arguments)}}();return(0,d.useEffect)((function(){(function(){var e=(0,o.Z)(c().mark((function e(){var n,r,a,i,o,s,d,l,p,_,f,m,v,g,x,b,Z,y;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=[],a=0,i=!0,o=!1,e.prev=5,d=(0,u.Z)(t);case 7:return e.next=9,d.next();case 9:return l=e.sent,i=l.done,e.next=13,l.value;case 13:if(p=e.sent,i){e.next=57;break}if(!(_=p).listProduct){e.next=53;break}f=[],m=!0,v=!1,e.prev=20,x=(0,u.Z)(_.listProduct);case 22:return e.next=24,x.next();case 24:return b=e.sent,m=b.done,e.next=28,b.value;case 28:if(Z=e.sent,m){e.next=35;break}(y=Z).display_type?n.push(y):f.push(y);case 32:m=!0,e.next=22;break;case 35:e.next=41;break;case 37:e.prev=37,e.t0=e.catch(20),v=!0,g=e.t0;case 41:if(e.prev=41,e.prev=42,m||null==x.return){e.next=46;break}return e.next=46,x.return();case 46:if(e.prev=46,!v){e.next=49;break}throw g;case 49:return e.finish(46);case 50:return e.finish(41);case 51:_.listProductNomal=f,f.length>0&&0==a&&w(_.product_tag_id);case 53:r.push(_);case 54:i=!0,e.next=7;break;case 57:e.next=63;break;case 59:e.prev=59,e.t1=e.catch(5),o=!0,s=e.t1;case 63:if(e.prev=63,e.prev=64,i||null==d.return){e.next=68;break}return e.next=68,d.return();case 68:if(e.prev=68,!o){e.next=71;break}throw s;case 71:return e.finish(68);case 72:return e.finish(63);case 73:k(r),h(n);case 75:case"end":return e.stop()}}),e,null,[[5,59,63,73],[20,37,41,51],[42,,46,50],[64,,68,72]])})));return function(){return e.apply(this,arguments)}})()()}),[t]),(0,r.jsxs)("div",{className:"ladiui form-group best-seller pt-24",id:"checkout-tags",children:[(0,r.jsx)("label",{className:"ladiui checkout-title-text mt-0 pt-0",children:_("TAGS.TITLE")}),l?(0,r.jsx)("ul",{className:"ladiui nav nav-tabs p-0",children:b&&b.map((function(e,t){return e.listProductNomal&&0!=e.listProductNomal.length?(0,r.jsx)("li",{className:"ladiui nav-item ",onClick:function(){y(e.product_tag_id)},children:(0,r.jsx)("span",{className:"ladiui tab-link",children:e.name})},e.product_tag_id):null}))}):(0,r.jsx)("ul",{className:"ladiui nav nav-tabs p-0 nav-image",children:b&&b.map((function(e,t){return e.listProductNomal&&0!=e.listProductNomal.length?(0,r.jsx)("li",{className:"ladiui nav-item ",onClick:function(){y(e.product_tag_id)},children:(0,r.jsxs)("div",{className:"ladiui tab-link",children:[(0,r.jsx)("div",{className:"image-product",children:(0,r.jsx)("img",{src:g.Z.getImageUrl(e.image_url),alt:"",width:60,height:60,onError:function(e){var t=e.currentTarget;t.onerror=null,t.src="".concat(g.Z.getImageUrl(""))}})}),(0,r.jsx)("div",{className:"name-product",children:(0,r.jsx)("span",{children:e.name})})]})},e.product_tag_id):null}))}),(0,r.jsx)("div",{children:b.map((function(e,t){return e.listProductNomal&&0!=e.listProductNomal.length?(0,r.jsxs)("div",{className:"ladiui form-group",id:"product-tag-".concat(e.product_tag_id),children:[(0,r.jsx)("label",{className:"ladiui checkout-title-text",children:e.name}),(0,r.jsx)("div",{className:"list-product",children:e.listProductNomal.map((function(e,t){return(0,r.jsx)(M.Z,{info:e,selectProduct:C},t)}))})]},t):null}))}),m&&m.length>0&&(0,r.jsxs)("div",{className:"ladiui form-group",children:[(0,r.jsx)("label",{className:"ladiui checkout-title-text",children:_("PRODUCT.PRODUCT_HOT")}),(0,r.jsx)("div",{className:"list-product",children:m.map((function(e,t){return e.variants.map((function(t,n){return(0,r.jsx)(q.Z,{updateCart:s,productCart:i,addToCart:a,infoV:t,info:e},n)}))}))})]})]})}var R=n(33154),G=n(47971),Y=n(88277),F=n(21101),H=n(56749),V=n(94024),K=n(30502),B=n(25524),z=n(16578);n(55149),n(26747);var J=n(20767),W=n(27007);n(29839);function $(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){o=!0,i=e},f:function(){try{c||null==n.return||n.return()}finally{if(o)throw i}}}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e){var t=(0,l.I0)(),n=(0,p.$)(),i=n.t,L=n.i18n,M=(0,f.useRouter)(),q=(0,d.useRef)(),X=(e=e.props)||{},Q=(0,l.v9)((function(e){return e.customFieldReducer})),te=(0,d.useMemo)((function(){return Q.customFields||[]}),[Q.customFields]),ne=(0,l.v9)((function(e){return e.discountReducer})),re=M.query.page_checkout_path,ae=(0,d.useState)(null),ie=ae[0],ce=ae[1],oe=(0,d.useState)(!1),se=oe[0],ue=oe[1],de=(0,d.useState)({}),le=de[0],pe=de[1],_e=(0,d.useState)([]),fe=_e[0],me=_e[1],he=(0,d.useState)([]),ve=he[0],ge=he[1],xe=(0,d.useState)({}),be=xe[0],ke=xe[1],Ze=(0,d.useState)(!1),we=Ze[0],ye=Ze[1],Ce=(0,d.useState)(!1),Se=Ce[0],Pe=Ce[1],Te=(0,d.useState)({}),Ae=Te[0],Ee=Te[1],Oe=(0,d.useState)([]),Ne=Oe[0],je=Oe[1],De=(0,d.useState)([]),Ie=De[0],Le=De[1],Me=(0,d.useState)({}),qe=Me[0],Ue=Me[1],Re=(0,d.useState)([]),Ge=Re[0],Ye=Re[1],Fe=(0,d.useState)({}),He=Fe[0],Ve=Fe[1],Ke=(0,d.useState)("\u0111"),Be=Ke[0],ze=Ke[1],Je=(0,d.useState)("VN"),We=Je[0],$e=Je[1],Xe=(0,d.useState)(!1),Qe=Xe[0],et=Xe[1],tt=(0,d.useState)(!1),nt=tt[0],rt=tt[1],at=(0,d.useState)(!1),it=at[0],ct=at[1],ot=(0,d.useState)(!1),st=ot[0],ut=ot[1],dt=(0,d.useState)(!0),lt=dt[0],pt=dt[1],_t=(0,d.useState)({}),ft=_t[0],mt=_t[1],ht=(0,d.useState)([]),vt=ht[0],gt=ht[1],xt=(0,d.useState)(v.ZP.STATUS.INACTIVE),bt=xt[0],kt=xt[1],Zt=(0,d.useState)({}),wt=Zt[0],yt=Zt[1],Ct=(0,d.useState)({}),St=Ct[0],Pt=Ct[1],Tt=(0,d.useState)(!1),At=Tt[0],Et=Tt[1],Ot=(0,d.useState)(!1),Nt=Ot[0],jt=Ot[1],Dt=(0,d.useState)(!1),It=Dt[0],Lt=Dt[1],Mt=(0,d.useState)(!1),qt=Mt[0],Ut=Mt[1],Rt=(0,d.useState)({}),Gt=Rt[0],Yt=Rt[1],Ft=(0,d.useState)({code:""}),Ht=Ft[0],Vt=Ft[1],Kt=(0,d.useState)({checkout_config_id:-1}),Bt=Kt[0],zt=Kt[1],Jt=(0,l.v9)((function(e){return e.defaultReducer})).listBanner,Wt=(0,d.useState)(0),$t=Wt[0],Xt=Wt[1],Qt=(0,d.useState)(ee({first_name:"",email:"",phone:"",address:"",country_code:"",country_name:"",state_id:"",state_name:"",district_id:"",district_name:"",ward_id:"",ward_name:"",note:"",zipcode:""},X.customerInfoDefault)),en=Qt[0],tn=Qt[1],nn=(0,d.useState)({first_name:"",email:"",phone:"",address:"",country_code:"",country_name:"",state_id:"",state_name:"",district_id:"",district_name:"",ward_id:"",ward_name:"",note:"",zipcode:""}),rn=nn[0],an=nn[1],cn=(0,d.useState)(ee({first_name:"",email:"",phone:"",address:"",country_code:"",country_name:"",state_id:"",state_name:"",district_id:"",district_name:"",ward_id:"",ward_name:"",note:"",zipcode:""},X.shippInfoDefault)),on=cn[0],sn=cn[1],un=(0,d.useState)({first_name:"",email:"",phone:"",address:"",country_code:"",country_name:"",state_id:"",state_name:"",district_id:"",district_name:"",ward_id:"",ward_name:"",note:"",zipcode:""}),dn=un[0],ln=un[1],pn=(0,d.useState)({code:"",value:"",note:"",price:0,is_valid:!1,is_url:!0,allow_promotion:!0}),_n=pn[0],fn=pn[1],mn=(0,d.useState)([]),hn=mn[0],vn=mn[1],gn=(0,d.useState)(null),xn=gn[0],bn=gn[1],kn=(0,d.useState)("idle"),Zn=kn[0],wn=kn[1];v.ZP.PRODUCT_TYPE.COMBO,v.ZP.PRODUCT_TYPE.PHYSICAL,v.ZP.PRODUCT_TYPE.FB;X.seoInfo&&t(Z.Z.setSeoSocial(X.seoInfo||{}));var yn=function(){var e=(0,o.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.A.clear();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,d.useEffect)((function(){if(ne.action==P.VALIDATE_DISCOUNT&&ne.status){var e=ne.discount,t=ne.discountShipping;e&&fn(ee(ee({},e),{},{code:e.discount_code,price:e.discount_price,allow_promotion:e.allow_promotion>0,discount:e,discountShipping:t}))}}),[ne.action]),(0,d.useEffect)((function(){t(w.Z.setData(T.Mx,xn)),fn({code:"",value:"",note:"",price:0,is_valid:!1,is_url:!0,allow_promotion:!0,discount:!1,discountShipping:!1}),t(y.Z.setDiscount(null)),t(y.Z.setDiscountShipping(null))}),[xn]),(0,d.useEffect)((function(){t(w.Z.setData(T.oj,on)),fn({code:"",value:"",note:"",price:0,is_valid:!1,is_url:!0,allow_promotion:!0,discount:!1,discountShipping:!1}),t(y.Z.setDiscount(null)),t(y.Z.setDiscountShipping(null))}),[on]),(0,d.useEffect)((function(){h.ZP.DOMAIN_DEFAULT&&console.info("dataProps: ",X);var e=function(){var e=(0,o.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yn();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();window.addEventListener("message",(function(e){"LADISALE"==e.data.status&&t(k.Z.setBannerAction(e.data.data)),"LADISALE_CHECKOUT_CONFIG_ID"==e.data.status&&e.data.data.checkout_config_id!=Bt.checkout_config_id&&zt(e.data.data)}),!1);var n=M.query.isPreview;ye(!!n);var r=M.query.coupon;r&&fn(ee(ee({},_n),{},{code:r}));var a=M.query.ref;if(a&&g.Z.setCookie("ladisale-ref",a,"/",30),e(),X){var i=ee({},M.query);delete i.productId,delete i.page_checkout_path,X.tracking&&g.Z.initTracking(X.tracking),Sn(X),X.info_store&&pe(X.info_store||{}),me(X.products.products||[]),ge(X.tags||[]),ze(X.currency_code||"VND"),$e(X.country_code||"VN"),Le(X.list_discount||[]),X.tags&&X.tags.length>0&&ue(!0),t(k.Z.setCurrencySymbolAction(X.currency_symbol||"\u0111")),t(k.Z.setCurrencyCodeAction(X.currency_code||"VND")),t(k.Z.setBannerAction(X.interface_options||[]))}}),[]),(0,d.useEffect)((function(){var e=setTimeout((function(){(fe&&fe.length>0||ve&&ve.length>0)&&jn()}),500);return function(){return clearTimeout(e)}}),[fe,ve]),(0,d.useEffect)((function(){if("ready"==Zn){var e=ee({},en),t=window.LadiLocation[Object.keys(window.LadiLocation)[0]];if(e.country_code?t=window.LadiLocation[e.country_code]:(e.country_code=t.id,e.country_name=t.name),!e.state_id&&e.state_name){var n=window.LadiLocation[e.country_code].data,r=g.Z.removeAccents(e.state_name).toLowerCase(),a=Object.keys(n).find((function(e){return g.Z.removeAccents(n[e].name).toLowerCase()===r}));a?(e.state_id=a,e.state_name=n[a].name):(e.state_name="",e.district_id=null,e.district_name="",e.ward_id=null,e.ward_name="")}if(e.state_id&&!e.district_id&&e.district_name){var i=window.LadiLocation[e.country_code].data[e.state_id].data,c=g.Z.removeAccents(e.district_name).toLowerCase(),o=Object.keys(i).find((function(e){return g.Z.removeAccents(i[e].name).toLowerCase()===c}));o?(e.district_id=o,e.district_name=i[o].name):(e.district_name="",e.ward_id=null,e.ward_name="")}if(e.state_id&&e.district_id&&!e.ward_id&&e.ward_name){var s=window.LadiLocation[e.country_code].data[e.state_id].data[e.district_id].data,u=g.Z.removeAccents(e.ward_name).toLowerCase(),d=Object.keys(s).find((function(e){return g.Z.removeAccents(s[e].name).toLowerCase()===u}));d?(e.ward_id=d,e.ward_name=s[d].name):e.ward_name=""}tn(e);var l=ee({},on);if(t=window.LadiLocation[Object.keys(window.LadiLocation)[0]],l.country_code?t=window.LadiLocation[l.country_code]:(l.country_code=t.id,l.country_name=t.name),!l.state_id&&l.state_name){var p=window.LadiLocation[l.country_code].data,_=g.Z.removeAccents(l.state_name).toLowerCase(),f=Object.keys(p).find((function(e){return g.Z.removeAccents(p[e].name).toLowerCase()===_}));f?(l.state_id=f,l.state_name=p[f].name):(l.state_name="",l.district_id=null,l.district_name="",l.ward_id=null,l.ward_name="")}if(l.state_id&&!l.district_id&&l.district_name){var m=window.LadiLocation[l.country_code].data[l.state_id].data,h=g.Z.removeAccents(l.district_name).toLowerCase(),v=Object.keys(m).find((function(e){return g.Z.removeAccents(m[e].name).toLowerCase()===h}));v?(l.district_id=v,l.district_name=m[v].name):(l.district_name="",l.ward_id=null,l.ward_name="")}if(l.state_id&&l.district_id&&!l.ward_id&&l.ward_name){var x=window.LadiLocation[l.country_code].data[l.state_id].data[l.district_id].data,b=g.Z.removeAccents(l.ward_name).toLowerCase(),k=Object.keys(x).find((function(e){return g.Z.removeAccents(x[e].name).toLowerCase()===b}));k?(l.ward_id=k,l.ward_name=x[k].name):l.ward_name=""}sn(l)}}),[Zn]),(0,d.useEffect)((function(){Kn()}),[en.state_id,en.district_id,on.state_id,on.district_id,vt]),(0,d.useEffect)((function(){if(!g.Z.isEmpty(Gt)&&Ht.code==v.ZP.PAYMENT_GATEWAY_CODE.VNPT_EPAY)if(Gt.gateway&&Gt.gateway.vnpt_epay.type==v.ZP.VNPT_EPAY.TYPE.VA.CODE){var e=zn(Gt.redirect_url);window.location.href=e}else window.openPayment(1,Gt.domain)}),[Gt]),(0,d.useEffect)((function(){vt&&0!=vt.length||Et(!1),vt&&function(){var e=(0,o.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,On(vt);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),t(C.Z.setData(S.SET_CARTS,vt))}),[vt]),(0,d.useEffect)((function(){-1!=Bt.checkout_config_id&&Pn(Bt)}),[Bt]),(0,d.useEffect)((0,o.Z)(c().mark((function e(){var t,n,r,i,o,s,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!vt||_n&&_n.code){e.next=4;break}On(vt,!1),e.next=40;break;case 4:if(_n.allow_promotion||!(_n.price>0)){e.next=40;break}t=(0,a.Z)(vt),n=!0,r=!1,e.prev=8,o=(0,u.Z)(t);case 10:return e.next=12,o.next();case 12:return s=e.sent,n=s.done,e.next=16,s.value;case 16:if(d=e.sent,n){e.next=23;break}delete d.discount;case 20:n=!0,e.next=10;break;case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(8),r=!0,i=e.t0;case 29:if(e.prev=29,e.prev=30,n||null==o.return){e.next=34;break}return e.next=34,o.return();case 34:if(e.prev=34,!r){e.next=37;break}throw i;case 37:return e.finish(34);case 38:return e.finish(29);case 39:gt(t);case 40:case"end":return e.stop()}}),e,null,[[8,25,29,39],[30,,34,38]])}))),[_n.price]),(0,d.useEffect)((function(){Kn()}),[_n.code]),(0,d.useEffect)((function(){if(ft&&ft.product_id){var e={email:be.configurable?en.email:on.email,phone:be.configurable?en.phone:on.phone};g.Z.trackingProduct(v.ZP.tiktok_tracking_event.view_content,ft.variantSelect,ft.quantitySelect,Be,e,We)}}),[ft]),(0,d.useEffect)((function(){}),[At]);var Cn=function(){var e=document.getElementById("checkout-tags");e&&(e.getBoundingClientRect().top.toFixed()<-10?Pe(!0):Pe(!1))};(0,d.useEffect)((function(){if(q&&q.current)return q.current.addEventListener("scroll",Cn,{passive:!0}),function(){q&&q.current&&q.current.removeEventListener("scroll",Cn,{passive:!0})}}),[]),(0,x.Z)("https://w.ladicdn.com/v4/source/location.".concat((We||"vn").toLowerCase(),".min.js"),be.enable_location||Ae.enable_location,wn);var Sn=function(){var e=(0,o.Z)(c().mark((function e(){var n,r,a=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.length>0&&void 0!==a[0]?a[0]:{},!g.Z.isEmpty(n)){e.next=3;break}return e.abrupt("return");case 3:ke(n.config_customer||{}),Ee(n.config_shipping||{}),je(n.config_payment||[]),Ue(n.config_discount||{}),Ye(n.config_shipping_method||{}),Ve(n.config_store_description||{}),n.checkout_config&&n.checkout_config.config_one_page_checkout&&et(n.checkout_config.config_one_page_checkout.enable_one_page_checkout||!1),n.checkout_config&&n.checkout_config.isShowInvoice&&ct(!0),n.checkout_config&&n.checkout_config.isShowCoupon&&ut(!0),n.checkout_config&&n.checkout_config.hidden_multi_national&&t(k.Z.setHideMultiNational(!0)),r=n.config_language,g.Z.isEmpty(r)&&(r="vi"),L.changeLanguage(r),Ht&&n.config_payment&&n.config_payment.length>0&&-1===n.config_payment.findIndex((function(e){return e.code===Ht.code}))&&Vt({code:n.config_payment[0].code});case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Pn=function(){var e=(0,o.Z)(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&t.checkout_config_id&&t.store_id)){e.next=8;break}return t.lang=L.language,e.next=4,m.Z.post(v.FP.GET_CHECKOUT_CONFIG,t);case 4:if((n=e.sent)&&200==n.code){e.next=7;break}return e.abrupt("return");case 7:Sn(n.data);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tn=function(){var e=(0,o.Z)(c().mark((function e(){var t,n,r,a,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={email:"",phone:""},be.configurable&&(t=ee({},en)),n=vt,r={cart_token:g.Z.getCookie(v.ZP.CART_TOKEN),checkout_token:g.Z.getCookie(v.ZP.CHECKOUT_TOKEN),discount_code:_n.code,customer_email:t.email,customer_phone:t.phone,lang:L.language,variants:n},e.next=6,b.A.getItem(v.ZP.LOCAL_DISCOUNT_DATE);case 6:if(a=e.sent,JSON.stringify(a)!=JSON.stringify(r)){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,m.Z.post(v.FP.VALIDATE_DISCOUNT,r);case 11:return i=e.sent,e.next=14,b.A.setItem(v.ZP.LOCAL_DISCOUNT_DATE,r);case 14:if(200==i.code){e.next=17;break}return fn(ee(ee({},_n),{},{price:0,allow_promotion:!1})),e.abrupt("return");case 17:fn(ee(ee({},_n),{},{price:i.data.discount_price,allow_promotion:i.data.allow_promotion}));case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),An=function(){if(h.ZP.DOMAIN_DEFAULT){var e=h.ZP.DOMAIN_DEFAULT;return M.query.domain_xxx&&(e=M.query.domain_xxx),e}return window.location.hostname},En=function(){return g.Z.getCookie(v.ZP.CART_TOKEN)},On=function(){var e=(0,o.Z)(c().mark((function e(t){var n,r,i,o,s,d,l,p,_,f,h,x,k,Z=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(Z.length>1&&void 0!==Z[1])||Z[1],!g.Z.isEmpty(t)){e.next=3;break}return e.abrupt("return");case 3:return r=t.map((function(e){return{product_variant_id:e.product_variant_id,quantity:e.quantity}})),e.next=6,b.A.getItem(v.ZP.LOCAL_FORAGE_PROMOTION_DATA);case 6:if(i=e.sent,!n||JSON.stringify(i)!=JSON.stringify(r)){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,m.Z.post(v.FP.GET_PROMOTION,{variants:r,lang:L.language});case 11:return o=e.sent,e.next=14,b.A.setItem(v.ZP.LOCAL_FORAGE_PROMOTION_DATA,r);case 14:if(s=(0,a.Z)(t),!o||200!==o.code){e.next=51;break}d=o.data.variants,l=!0,p=!1,e.prev=19,f=function(){var e=k,t=d.findIndex((function(t){return t.product_variant_id===e.product_variant_id}));e.discount=t>-1?d[t].discount:null},h=(0,u.Z)(s);case 22:return e.next=24,h.next();case 24:return x=e.sent,l=x.done,e.next=28,x.value;case 28:if(k=e.sent,l){e.next=34;break}f();case 31:l=!0,e.next=22;break;case 34:e.next=40;break;case 36:e.prev=36,e.t0=e.catch(19),p=!0,_=e.t0;case 40:if(e.prev=40,e.prev=41,l||null==h.return){e.next=45;break}return e.next=45,h.return();case 45:if(e.prev=45,!p){e.next=48;break}throw _;case 48:return e.finish(45);case 49:return e.finish(40);case 50:gt(s);case 51:return e.next=53,Tn(!1);case 53:case"end":return e.stop()}}),e,null,[[19,36,40,50],[41,,45,49]])})));return function(t){return e.apply(this,arguments)}}(),Nn=function(){var e=(0,o.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=ee({},en)).first_name=t.customer_first_name||n.first_name,n.email=g.Z.getNormalizeEmail(t.customer_email||n.email),n.phone=g.Z.getNormalizePhone(t.customer_phone||n.phone),n.address=t.customer_address||n.address,n.note=t.customer_note||n.note,n.country_code=t.customer_country_code||n.country_code,n.country_name=t.customer_country_name||n.country_name,n.state_id=t.customer_state_id||n.state_id,n.state_name=t.customer_state_name||n.state_name,n.district_id=t.customer_district_id||n.district_id,n.district_name=t.customer_district_name||n.district_name,n.ward_id=t.customer_ward_id||n.ward_id,n.ward_name=t.customer_ward_name||n.ward_name,tn(n),(r=ee({},on)).first_name=t.shipping_first_name||r.first_name,r.email=g.Z.getNormalizeEmail(t.shipping_email||r.email),r.phone=g.Z.getNormalizePhone(t.shipping_phone||r.phone),r.address=t.shipping_address||r.address,r.note=t.shipping_note||r.note,r.country_code=t.shipping_country_code||r.country_code,r.country_name=t.shipping_country_name||r.country_name,r.state_id=t.shipping_state_id||r.state_id,r.state_name=t.shipping_state_name||r.state_name,r.district_id=t.shipping_district_id||r.district_id,r.district_name=t.shipping_district_name||r.district_name,r.ward_id=t.shipping_ward_id||r.ward_id,r.ward_name=t.shipping_ward_name||r.ward_name,sn(r);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),jn=function(){var e=(0,o.Z)(c().mark((function e(){var n,r,i,o,s,d,l,p,_,f,h,g,x,b,k,Z,w,y,C,S,P,T,A,E=arguments;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=E.length>0&&void 0!==E[0]?E[0]:"",!we){e.next=4;break}return mt({}),e.abrupt("return");case 4:if(n||(n=En()),n){e.next=7;break}return e.abrupt("return");case 7:return Ut(!0),e.next=10,m.Z.post(v.FP.SHOW_CART,{domain:An(M.query.domain_xxx),lang:L.language,path:re,path_type:v.ZP.PATH_TYPE.PAGE_CHECKOUT},t,{"cart-token":n});case 10:if(r=e.sent,Ut(!1),200==r.code){e.next=14;break}return e.abrupt("return");case 14:if(lt&&pt(!1),r.data.checkout&&Nn(r.data.checkout),i=[],fe&&fe.length>0&&(i=(0,a.Z)(fe)),!(ve&&ve.length>0)){e.next=52;break}o=!0,s=!1,e.prev=21,l=(0,u.Z)(ve);case 23:return e.next=25,l.next();case 25:return p=e.sent,o=p.done,e.next=29,p.value;case 29:if(_=e.sent,o){e.next=36;break}f=_,i=[].concat((0,a.Z)(i),(0,a.Z)(f.listProduct));case 33:o=!0,e.next=23;break;case 36:e.next=42;break;case 38:e.prev=38,e.t0=e.catch(21),s=!0,d=e.t0;case 42:if(e.prev=42,e.prev=43,o||null==l.return){e.next=47;break}return e.next=47,l.return();case 47:if(e.prev=47,!s){e.next=50;break}throw d;case 50:return e.finish(47);case 51:return e.finish(42);case 52:if(i&&!(i.length<=0)){e.next=54;break}return e.abrupt("return");case 54:h=!0,g=!1,e.prev=56,b=c().mark((function e(){var t,n,r,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(delete(t=w).created_at,delete t.updated_at,delete t.is_delete,n=[],r=i.findIndex((function(e){return e.product_id===t.product_id})),!t.src&&r>-1&&i[r].images&&i[r].images.length>0&&(t.src=i[r].images[0].src),!(t.up_sell_ids&&t.up_sell_ids.length>0)){e.next=45;break}if(!(r<0)){e.next=10;break}return e.abrupt("return","break");case 10:y=!0,C=!1,e.prev=12,a=function(){var e=A,t=i[r].up_sell_variants.findIndex((function(t){return t.product_variant_id===e}));if(t<0)return"break";n.push(i[r].up_sell_variants[t])},P=(0,u.Z)(t.up_sell_ids);case 15:return e.next=17,P.next();case 17:return T=e.sent,y=T.done,e.next=21,T.value;case 21:if(A=e.sent,y){e.next=29;break}if("break"!==a()){e.next=26;break}return e.abrupt("break",29);case 26:y=!0,e.next=15;break;case 29:e.next=35;break;case 31:e.prev=31,e.t0=e.catch(12),C=!0,S=e.t0;case 35:if(e.prev=35,e.prev=36,y||null==P.return){e.next=40;break}return e.next=40,P.return();case 40:if(e.prev=40,!C){e.next=43;break}throw S;case 43:return e.finish(40);case 44:return e.finish(35);case 45:t.upSellSelects=n;case 46:case"end":return e.stop()}}),e,null,[[12,31,35,45],[36,,40,44]])})),k=(0,u.Z)(r.data.carts);case 59:return e.next=61,k.next();case 61:return Z=e.sent,h=Z.done,e.next=65,Z.value;case 65:if(w=e.sent,h){e.next=74;break}return e.delegateYield(b(),"t1",68);case 68:if("break"!==e.t1){e.next=71;break}return e.abrupt("break",74);case 71:h=!0,e.next=59;break;case 74:e.next=80;break;case 76:e.prev=76,e.t2=e.catch(56),g=!0,x=e.t2;case 80:if(e.prev=80,e.prev=81,h||null==k.return){e.next=85;break}return e.next=85,k.return();case 85:if(e.prev=85,!g){e.next=88;break}throw x;case 88:return e.finish(85);case 89:return e.finish(80);case 90:gt(r.data.carts),setTimeout((function(){r.data.checkout&&(r.data.checkout.discount_code||r.data.checkout.discount_value)&&fn(ee(ee({},_n),{},{code:r.data.checkout.discount_code,value:r.data.checkout.discount_value,price:r.data.checkout.discount_fee,note:r.data.checkout.discount_note,is_valid:!0}))}),200);case 92:case"end":return e.stop()}}),e,null,[[21,38,42,52],[43,,47,51],[56,76,80,90],[81,,85,89]])})));return function(){return e.apply(this,arguments)}}(),Dn=function(){var e=(0,o.Z)(c().mark((function e(n){var r,a,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(jt(!0),r={},r=n?ee(ee({},n),{},{quantitySelect:n.min_buy||1,upSellSelects:[]}):ee(ee({},ft.variantSelect),{},{quantitySelect:ft.quantitySelect,upSellSelects:ft.up_sell_variants.filter((function(e){return e.isCheck}))}),!we){e.next=6;break}return mt({}),e.abrupt("return");case 6:return e.next=8,m.Z.post(v.FP.ADD_TO_CART,{domain:An(M.query.domain_xxx),path:re,path_type:v.ZP.PATH_TYPE.PAGE_CHECKOUT,product_variant_id:r.product_variant_id,quantity:r.quantitySelect,up_sell_ids:r.upSellSelects.map((function(e){return e.product_variant_id})),lang:L.language},t,{"cart-token":En()});case 8:if(a=e.sent,jt(!1),200===a.code){e.next=12;break}return e.abrupt("return");case 12:a.data.cart_token&&g.Z.setCheckoutAndCartToken(a.data.checkout_token,a.data.cart_token),i={email:be.configurable?en.email:on.email,phone:be.configurable?en.phone:on.phone},g.Z.trackingProduct(v.ZP.tiktok_tracking_event.add_to_cart,r,r.quantitySelect,Be,i,We),jn(a.data.cart_token),mt({});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),In=function(){var e=(0,o.Z)(c().mark((function e(n,r){var i,o,s,u,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Lt(!0),i={domain:An(M.query.domain_xxx),path:re,path_type:v.ZP.PATH_TYPE.PAGE_CHECKOUT,product_variant_id:r.product_variant_id,quantity:n,up_sell_ids:r.up_sell_ids,language:L.language},e.next=4,m.Z.post(v.FP.UPDATE_CART,i,t,{"cart-token":En()});case 4:if(o=e.sent,Lt(!1),200===o.code){e.next=8;break}return e.abrupt("return");case 8:o.data.cart_token&&g.Z.setCheckoutAndCartToken(o.data.checkout_token,o.data.cart_token),s=(0,a.Z)(vt),u=JSON.stringify(r.up_sell_ids),(d=s.findIndex((function(e){var t=JSON.stringify(e.up_sell_ids);if(e.product_type==v.ZP.PRODUCT_TYPE.COMBO){if(e.product_variant_id==r.product_variant_id)return!0}else if(e.product_variant_id==r.product_variant_id&&t==u)return!0;return!1})))>-1&&(n<=0?s.splice(d,1):s[d].quantity=n),gt(s);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ln=function(e){Et(e)},Mn=function(){Et(!1),mt({})},qn=function(){mt({})},Un=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ship";"cus"==t&&tn(ee(ee({},en),e)),sn(ee(ee({},on),e))},Rn=function(){var e=(0,o.Z)(c().mark((function e(n){var r,o,u,d,l,p,_,f,m,h,v,x,b,Z;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=X.config_language,Mn(),!we){e.next=5;break}return Xt(n),e.abrupt("return");case 5:if(g.Z.isEmpty(r)&&(r="vi"),!(n>0)||vt&&0!=vt.length){e.next=10;break}return o={title:i("MSG.NOTI"),isShow:!0,isShowTitle:!0,content:i("MSG.AT_LEAST_ONE_PRODUCT")},t(k.Z.setModalErrorAction(o)),e.abrupt("return");case 10:if(2!=n&&3!=n||!be.configurable){e.next=33;break}if((u=g.Z.validCustomer(be,en,r,i)).status){e.next=16;break}return an(ee(ee({},rn),{},(0,s.Z)({},u.lable,u.value))),Xt(1),e.abrupt("return");case 16:if((d=g.Z.validListCus(vt,r,i)).status){e.next=23;break}return(l=(0,a.Z)(vt))[d.indexP].list_customer_valid[d.indexC][d.lable]=d.value,gt(l),Xt(1),e.abrupt("return");case 23:return p=be.custom_field,e.next=26,g.Z.validCustomField(p,te,i);case 26:if((_=e.sent).status||!(_.index>-1)){e.next=33;break}return(f=(0,a.Z)(te))[_.index].error=_.value,t(A.Z.setData(E.q,f||[])),Xt(1),e.abrupt("return");case 33:if(3!=n||!Ae.configurable){e.next=49;break}if((m=g.Z.validCustomer(Ae,on,r,i)).status){e.next=39;break}return ln(ee(ee({},dn),{},(0,s.Z)({},m.lable,m.value))),Xt(2),e.abrupt("return");case 39:return h=Ae.custom_field,e.next=42,g.Z.validCustomField(h,te,i);case 42:if((v=e.sent).status||!(v.index>-1)){e.next=49;break}return(x=(0,a.Z)(te))[v.index].error=v.value,t(A.Z.setData(E.q,x||[])),Xt(2),e.abrupt("return");case 49:if(3!=n){e.next=57;break}if((b=g.Z.validListCus(vt,r,i)).status){e.next=57;break}return(Z=(0,a.Z)(vt))[b.indexP].list_customer_valid[b.indexC][b.lable]=b.value,gt(Z),be.configurable?Xt(1):Xt(2),e.abrupt("return");case 57:Xt(n);case 58:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Gn=function(){var e=(0,a.Z)(vt),t={};Object.keys(en).map((function(e){en.hasOwnProperty(e)&&""!=en[e]&&(!t.hasOwnProperty(e)||t[e]&&""===t[e])&&(t[e]=en[e])}));var n=_n.discount,r=_n.discountShipping;return{lang:L.language,domain:An(M.query.domain_xxx),path:re,path_type:v.ZP.PATH_TYPE.PAGE_CHECKOUT,cart_token:En(),checkout_token:g.Z.getCookie(v.ZP.CHECKOUT_TOKEN),discount_code:n&&n.discount_price>0?n.discount_code:null,discount_shipping_code:r&&r.fee>0?r.code:null,customer_first_name:be.configurable?en.first_name:on.first_name,customer_email:be.configurable?en.email:on.email,customer_phone:be.configurable?en.phone:on.phone,customer_address:be.configurable?en.address:on.address,customer_note:be.configurable?en.note:on.note,customer_country_code:be.configurable?en.country_code:on.country_code,customer_state_id:be.configurable?en.state_id:on.state_id,customer_district_id:be.configurable?en.district_id:on.district_id,customer_ward_id:be.configurable?en.ward_id:on.ward_id,customer_custom_country_name:be.configurable?en.custom_country_name:on.custom_country_name,customer_custom_state_name:be.configurable?en.custom_state_name:on.custom_state_name,customer_custom_district_name:be.configurable?en.custom_district_name:on.custom_country_name,customer_custom_ward_name:be.configurable?en.custom_ward_name:on.custom_ward_name,product_id:vt[0].product_id,shipping_first_name:t.first_name,shipping_address:t.address,shipping_phone:t.phone,shipping_email:t.email,shipping_country_code:t.country_code||on.country_code,shipping_state_id:t.state_id||on.state_id,shipping_district_id:t.district_id||on.district_id,shipping_ward_id:t.ward_id||on.ward_id,shipping_custom_country_name:on.custom_country_name||"",shipping_custom_state_name:on.custom_state_name||"",shipping_custom_district_name:on.custom_district_name||"",shipping_custom_ward_name:on.custom_ward_name||"",shipping_note:t.note,is_export_invoice:bt,variants:e||null,utm:{url_page:window.location.href,utm_source:M.query.utm_source,utm_medium:M.query.utm_medium,utm_campaign:M.query.utm_campaign,utm_term:M.query.utm_term,utm_content:M.query.utm_content,ref:g.Z.getCookie("ladisale-ref")},ladifd:M.query.ladifd||g.Z.getCookie("ladisale-ladifd"),custom_fields_checkout:te}},Yn=(0,d.useCallback)((0,_.debounce)((0,o.Z)(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!we&&!nt){e.next=2;break}return e.abrupt("return");case 2:if(vt&&0!=vt.length){e.next=4;break}return e.abrupt("return");case 4:return t=Gn(),t=g.Z.normalizeStringObj(t),e.next=8,b.A.getItem(v.ZP.LOCAL_FORAGE_CHECKOUT_DATA);case 8:if(n=e.sent,JSON.stringify(n)!=JSON.stringify(t)){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,m.Z.post(v.FP.CREATE_CHECKOUT,t);case 13:return r=e.sent,e.next=16,b.A.setItem(v.ZP.LOCAL_FORAGE_CHECKOUT_DATA,t);case 16:200===r.code&&g.Z.setCheckoutAndCartToken(r.data.checkout_token,r.data.cart_token);case 17:case"end":return e.stop()}}),e)}))),2e3,[])),Fn=function(e,t){var n=!0;e&&!g.Z.isEmail(e)&&(n=!1);var r=!0,a=X.config_language;return g.Z.isEmpty(a)&&(a="vi"),t&&!g.Z.isMobilePhone(t,a)&&(r=!1),!(!n||!r||!e&&!t)},Hn=function(){var e=(0,o.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!we){e.next=2;break}return e.abrupt("return");case 2:if(Fn(en.email,en.phone)||Fn(on.email,on.phone)){e.next=4;break}return e.abrupt("return");case 4:Yn();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Vn=function(){return g.Z.getCookie(v.ZP.CHECKOUT_TOKEN)},Kn=function(){var e=(0,o.Z)(c().mark((function e(){var t,n,r,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!we){e.next=2;break}return e.abrupt("return");case 2:if(Ge&&Ge.enable_shipping_method){e.next=4;break}return e.abrupt("return");case 4:if(t=Ae.configurable?on.state_id:en.state_id,n=Ae.configurable?on.district_id:en.district_id,!t||!n){e.next=18;break}if(Vn()||En()){e.next=11;break}Yn(),e.next=16;break;case 11:return r={checkout_token:Vn(),cart_token:En(),state_id:t,district_id:n,customer_phone:en.phone?en.phone:"",customer_email:en.email?en.email:"",discount_code:_n.code?_n.code:"",discount_shipping_code:_n.discount_shipping?_n.discount_shipping.code:"",lang:L.language},e.next=14,m.Z.post(v.FP.LIST_SHIPPING_METHODS,r);case 14:200===(a=e.sent).code&&(vn(a.data.shipping_methods),a.data.shipping_methods&&0!=a.data.shipping_methods.length||fn(ee(ee({},_n),{},{discount_shipping:{}})),(!xn&&a.data.shipping_methods.length>0||a.data.shipping_methods.findIndex((function(e){return e.shipping_method_id===xn.shipping_method_id}))<0)&&bn(a.data.shipping_methods[0]));case 16:e.next=20;break;case 18:bn(null),vn([]);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Bn=function(){var e,t=0,n=$(vt);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=r.price;r.discount&&(a-=r.discount.fee),a<0&&(a=0),t+=a*r.quantity}}catch(i){n.e(i)}finally{n.f()}return _n&&_n.price&&(t-=_n.price),xn&&xn.fee&&(t+=xn.fee),t<0&&(t=0),t},zn=function(e){var t=new URL(e);return t.searchParams.set("checkout_config_id",X.checkout_config_id),t.toString()},Jn=function(){var e=(0,o.Z)(c().mark((function e(n){var r,o,u,d,l,p,_,f,h,x,b,Z,w,y,C,S,P,T;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r=X.config_language,g.Z.isEmpty(r)&&(r="vi"),Mn(),!we){e.next=6;break}return e.abrupt("return");case 6:if(vt&&0!=vt.length){e.next=10;break}return o={title:i("MSG.NOTI"),isShow:!0,isShowTitle:!0,content:i("MSG.AT_LEAST_ONE_PRODUCT")},t(k.Z.setModalErrorAction(o)),e.abrupt("return");case 10:if((u=g.Z.validCustomer(be,en,r,i)).status){e.next=15;break}return an(ee(ee({},rn),{},(0,s.Z)({},u.lable,u.value))),Xt(1),e.abrupt("return");case 15:return d=be.custom_field,e.next=18,g.Z.validCustomField(d,te,i);case 18:if(l=e.sent,!(be.configurable&&!l.status&&l.index>-1)){e.next=25;break}return(p=(0,a.Z)(te))[l.index].error=l.value,t(A.Z.setData(E.q,p||[])),Xt(1),e.abrupt("return");case 25:if((_=g.Z.validCustomer(Ae,on,r,i)).status){e.next=30;break}return ln(ee(ee({},dn),{},(0,s.Z)({},_.lable,_.value))),Xt(2),e.abrupt("return");case 30:return d=Ae.custom_field,e.next=33,g.Z.validCustomField(d,te,i);case 33:if(l=e.sent,!(Ae.configurable&&!l.status&&l.index>-1)){e.next=40;break}return(f=(0,a.Z)(te))[l.index].error=l.value,t(A.Z.setData(E.q,f||[])),Xt(2),e.abrupt("return");case 40:if((h=g.Z.validListCus(vt,r,i)).status){e.next=46;break}return(x=(0,a.Z)(vt))[h.indexP].list_customer_valid[h.indexC][h.lable]=h.value,gt(x),e.abrupt("return");case 46:if(!(Bn()>0)||g.Z.validGateway(Ht)){e.next=50;break}return b={title:i("MSG.NOTI"),isShow:!0,isShowTitle:!0,content:i("MSG.AT_LEAST_PAYMENT")},t(k.Z.setModalErrorAction(b)),e.abrupt("return");case 50:if((Z=g.Z.validInvoice(bt,wt,i)).status){e.next=54;break}return Pt(ee(ee({},St),{},(0,s.Z)({},Z.lable,Z.value))),e.abrupt("return");case 54:return Ut(!0),rt(!0),w=Ht,Bn()<=0&&(w={code:v.ZP.PAYMENT_GATEWAY_CODE.COD}),y=ee({invoiceInfo:wt,checkout_token:Vn(),session_id:g.Z.getCookie(v.ZP.SESSION_ID),shipping_method_id:Ge.enable_shipping_method&&xn?xn.shipping_method_id:null,url:window.location.origin,state_id:on.state_id,district_id:on.district_id,gateway:w,path_type:v.ZP.PATH_TYPE.PAGE_CHECKOUT,lang:L.language,checkout_path:g.Z.getSecondPathName(location)},Gn()),y=g.Z.normalizeStringObj(y),e.next=62,m.Z.post(v.FP.PAYMENT,y,t);case 62:if(C=e.sent,Ut(!1),rt(!1),200==C.code){e.next=67;break}return e.abrupt("return");case 67:S=Bn(),P={email:y.customer_email,phone:y.customer_phone},g.Z.trackingProducts(v.ZP.tiktok_tracking_event.place_an_order,vt,S,Be,P,We),[v.ZP.PAYMENT_GATEWAY_CODE.COD,v.ZP.PAYMENT_GATEWAY_CODE.BANK].includes(w.code)||g.Z.trackingProducts(v.ZP.tiktok_tracking_event.initiate_checkout,vt,S,Be,P,We),g.Z.trackingInitCheckout({variants:vt,currency:Be,total:S,discountCode:_n.code}),g.Z.removeCookieInPage(),w.code==v.ZP.PAYMENT_GATEWAY_CODE.VNPT_EPAY&&C.code===v.sz.OK&&Yt(C.data),T=C.data,w.code!=v.ZP.PAYMENT_GATEWAY_CODE.VNPT_EPAY&&M.push(T);case 76:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Wn=!!(vt&&vt.length>0)&&vt[0].product_variant_id;return X?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"ladiui checkout-dns checkout-old",ref:q,children:[qt&&(0,r.jsx)(K.Z,{blur:!0}),Nt&&(0,r.jsx)(K.Z,{blur:!0}),It&&(0,r.jsx)(K.Z,{blur:!0}),(0,r.jsxs)("div",{className:"ladiui checkout contain",children:[(0,r.jsx)(B.Z,{data:Jt,type:0}),!Qe&&(!se||$t>0)&&(0,r.jsx)(z.Z,{tabSelect:$t,configCustomer:be,configShipping:Ae,handelChangeTab:Rn}),(0,r.jsxs)("div",{className:"ladiui tab-content",children:[(Qe||0==$t)&&(0,r.jsxs)("div",{className:"ladiui ".concat(Qe?"":"tab-pane"," fade ").concat(0==$t?"show open":""),children:[(0,r.jsx)(B.Z,{data:Jt,type:1}),He&&He.enable_store_description&&(0,r.jsx)(O.Z,{storeInfo:le,listDiscounts:Ie,isShowCoupon:st,setShowTabDiscount:ce}),ve&&ve.length>0&&(0,r.jsx)(U,{isTagHide:Se,productCart:vt,updateCart:In,addToCart:Dn,listData:ve,setProductSelect:mt}),fe&&fe.length>0&&(0,r.jsx)(I.Z,{productCart:vt,updateCart:In,addToCart:Dn,listData:fe,setProductSelect:mt,isOneProduct:1==fe.length})]}),Qe&&(0,r.jsx)(J.Z,{productCart:vt,discountInfo:_n,selectedShippingMethod:xn,handelShowCartDetail:Ln}),(Qe||1==$t)&&be&&be.configurable&&(0,r.jsx)("div",{className:"ladiui ".concat(Qe?"":"tab-pane"," fade ").concat(1==$t?"show open":""," "),children:(0,r.jsx)(G.Z,{configCustomer:be,isLoadedLocationJS:Zn,customerInfo:en,setCustomerInfo:tn,discountInfo:_n,setDiscountInfo:fn,productCart:vt,validaCus:rn,setValidaCus:an,onChangeCustomerInfo:function(e){var t=e.target,n=t.name,r=t.value;n&&n.includes("phone")&&(r=r.replace(/\s/g,"")),tn(ee(ee({},en),{},(0,s.Z)({},n,r))),an(ee(ee({},rn),{},(0,s.Z)({},n,""))),"note"!=e.target.name&&sn(ee(ee({},on),{},(0,s.Z)({},n,r)))},onBlurCustomerInfo:Hn,configDiscount:qe,changeLocation:Un,setProductCart:gt,configShipping:Ae,isOnePage:Qe,selectedShippingMethod:xn,handelShowCartDetail:Ln,isOneProduct:!1,infoProducts:fe,updateCart:In,addToCart:Dn,setProductSelect:mt,configShippingMethod:Ge,shippingMethods:hn,setSelectedShippingMethod:bn})}),(Qe||2==$t)&&Ae&&Ae.configurable&&(0,r.jsx)("div",{className:"ladiui ".concat(Qe?"":"tab-pane"," fade ").concat(2==$t?"show open":""),children:(0,r.jsx)(Y.Z,{onChangeShippingAddress:function(e){var t=e.target,n=t.name,r=t.value;n&&n.includes("phone")&&(r=r.replace(/\s/g,"")),ln(ee(ee({},dn),{},(0,s.Z)({},n,""))),sn(ee(ee({},on),{},(0,s.Z)({},n,r)))},configShipping:Ae,isLoadedLocationJS:Zn,shippingAddress:on,setShippingAddress:sn,validShipp:dn,setValidShipp:ln,onBlurCustomerInfo:Hn,configShippingMethod:Ge,shippingMethods:hn,selectedShippingMethod:xn,setSelectedShippingMethod:bn,configCustomer:be,configDiscount:qe,discountInfo:_n,setDiscountInfo:fn,productCart:vt,changeLocation:Un,setProductCart:gt,isOnePage:Qe,handelShowCartDetail:Ln,isOneProduct:!1,infoProducts:fe,updateCart:In,addToCart:Dn,setProductSelect:mt})}),(Qe||3==$t)&&(0,r.jsx)("div",{className:"ladiui ".concat(Qe?"":"tab-pane"," fade ").concat(3==$t?"show open":""),children:(0,r.jsx)(F.Z,{configPayment:Ne,selectedPaymentGateway:Ht,setSelectedPaymentGateway:Vt,configShipping:Ae,shippingAddress:on,handelChangeTab:Rn,productCart:vt,infoStore:le,selectedShippingMethod:xn,discountInfo:_n,setIsExportInvoice:kt,isExportInvoice:bt,invoiceInfo:wt,setInvoiceInfo:yt,validInvoice:St,setValidInvoice:Pt,isOnePage:Qe,configDiscount:qe,setDiscountInfo:fn,configCustomer:be,customerInfo:en,isShowInvoice:it,getCheckoutToken:Vn,getCartToken:En,enableDiscount:qe&&qe.enable_discount,setShowTabDiscount:ce})}),(0,r.jsx)(B.Z,{data:Jt,type:2})]}),ft&&ft.product_id&&!v.ZP.listTypeService.includes(ft.type)&&(0,r.jsx)(R.Z,{info:ft,addToCart:Dn,handleCloseProductSelect:qn,isLoadingAddCard:Nt,setProductSelect:mt}),ft&&ft.product_id&&v.ZP.listTypeService.includes(ft.type)&&(0,r.jsx)(V.Z,{info:ft,addToCart:Dn,handleCloseProductSelect:qn,isLoadingAddCard:Nt,setProductSelect:mt}),(!ft||!ft.product_id)&&($t<3||Qe)&&(0,r.jsx)(N.Z,{productCart:vt,handelShowCartDetail:Ln,nextTabCart:function(e){e.preventDefault();var t=$t;t<3&&(t+=1),1!=t||be.configurable||(t+=1),2!=t||Ae.configurable||(t+=1),Rn(t)},discountInfo:_n,selectedShippingMethod:xn,isShowCartDetail:At,onPayment:Jn,isOnePage:Qe,selectedPaymentGateway:Ht}),(!ft||!ft.product_id)&&vt&&vt.length>0&&3===$t&&(0,r.jsx)(j.Z,{productCart:vt,discountInfo:_n,selectedShippingMethod:xn,onPayment:Jn,selectedPaymentGateway:Ht}),(0,r.jsx)(D.Z,{isShowCartDetail:At,productCart:vt,handelClose:Ln,updateCart:In,discountInfo:_n,selectedShippingMethod:xn,isLoadingUpdateCard:It,listBanner:Jt,setDiscountInfo:fn,configCustomer:be,configDiscount:qe,customerInfo:en,getCheckoutToken:Vn,getCartToken:En,enableDiscount:qe&&qe.enable_discount}),(ft&&ft.product_id||At)&&(0,r.jsx)("div",{className:"ladiui-checkout-bg-overlay",onClick:Mn})]}),ie&&(0,r.jsx)(W.Z,{onClose:function(){return ce(!1)},checkout_token:Vn(),cart_token:En(),pathType:e.path_type,isShowCoupon:Wn&&st,productVariantID:Wn})]}),Ht.code==v.ZP.PAYMENT_GATEWAY_CODE.VNPT_EPAY&&g.Z.getVNPTEpayForm(Gt)]}):(0,r.jsx)(H.Z,{})}},46972:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(85893),a=(n(67294),n(11163)),i=(n(96463),n(56732));n(86644);function c(e){var t=e.url,n=e.link,c=(0,a.useRouter)();return(0,r.jsx)("div",{className:"container-banner",children:(0,r.jsx)("img",{className:"image-banner",src:i.Z.getImageUrl(t||("true"==c.query.isPreview?"6109/premium-vector-_-new-year-sale-colorful-sale-banner-20230713071321-en96q.jpeg":"")),alt:"",onClick:function(){n&&window.open(n,"_blank")},onError:function(e){var t=e.currentTarget;t.onerror=null,t.src="".concat(i.Z.getImageUrl(""))}})})}},48015:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});var r=n(85893),a=n(809),i=n.n(a),c=n(92447),o=n(80711),s=n(67294),u=n(11163),d=n(49422),l=n(96365),p=(n(46066),n(96630)),_=n(96463),f=n(65004),m=n(56732),h=n(86644),v=n(65863);function g(e){var t=e.is_show_star,n=void 0!==t&&t,a=e.products,g=e.screen,x=void 0===g?"":g,b=e.indexP,k=void 0===b?"":b,Z=e.setProductInfo,w=(0,u.useRouter)(),y=(0,l.I0)(),C=(0,s.useState)(0),S=C[0],P=C[1],T=(0,l.v9)((function(e){return e.storeReducer})),A=(0,l.v9)((function(e){return e.defaultReducer})),E=(0,s.useMemo)((function(){return A.pathType||h.ZP.PATH_TYPE.PAGE_STORE}),[A.pathType]),O=(0,s.useMemo)((function(){return A.pathRoot||""}),[A.pathRoot]),N=(0,s.useMemo)((function(){return T.info_store||{}}),[T.info_store]),j=function(){var e=(0,c.Z)(i().mark((function e(t,n){var r,a,c,s,u,d,l,p,g,x,b,k,C,S,P,T,A,E,O,N,j,D,I,L;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),t.stopPropagation(),"true"!=w.query.isPreview){e.next=4;break}return e.abrupt("return");case 4:if(!Z){e.next=122;break}r=n.variants,a=n.up_sell_variants,c=!0,s=!1,e.prev=9,d=(0,o.Z)(r);case 11:return e.next=13,d.next();case 13:return l=e.sent,c=l.done,e.next=17,l.value;case 17:if(p=e.sent,c){e.next=105;break}if(g=p,!v.Z.isAvailable(g)){e.next=102;break}x=[],g.optionSelects=[],b=!0,k=!1,e.prev=25,S=(0,o.Z)(a);case 27:return e.next=29,S.next();case 29:return P=e.sent,b=P.done,e.next=33,P.value;case 33:if(T=e.sent,b){e.next=40;break}T.isCheck=!1;case 37:b=!0,e.next=27;break;case 40:e.next=46;break;case 42:e.prev=42,e.t0=e.catch(25),k=!0,C=e.t0;case 46:if(e.prev=46,e.prev=47,b||null==S.return){e.next=51;break}return e.next=51,S.return();case 51:if(e.prev=51,!k){e.next=54;break}throw C;case 54:return e.finish(51);case 55:return e.finish(46);case 56:if(g.up_sell_variants=a,g.quantitySelect=1,g.min_buy&&(g.quantitySelect=g.min_buy),!h.ZP.listTypeService.includes(g.type)){e.next=62;break}return y(_.Z.setData(f.PX,g)),e.abrupt("return");case 62:if(!g.options){e.next=97;break}A=!0,E=!1,e.prev=65,N=(0,o.Z)(g.options);case 67:return e.next=69,N.next();case 69:return j=e.sent,A=j.done,e.next=73,j.value;case 73:if(D=e.sent,A){e.next=81;break}L={name:(I=D).option_name,option_id:I.option_id,value:I.option_value_value.name,option_value_id:I.option_value_id},x.push(L);case 78:A=!0,e.next=67;break;case 81:e.next=87;break;case 83:e.prev=83,e.t1=e.catch(65),E=!0,O=e.t1;case 87:if(e.prev=87,e.prev=88,A||null==N.return){e.next=92;break}return e.next=92,N.return();case 92:if(e.prev=92,!E){e.next=95;break}throw O;case 95:return e.finish(92);case 96:return e.finish(87);case 97:return g.optionSelects=x,y(_.Z.setData(f.PX,g)),y(_.Z.setData(f.qO,!0)),m.Z.hideOverFlow(),e.abrupt("break",105);case 102:c=!0,e.next=11;break;case 105:e.next=111;break;case 107:e.prev=107,e.t2=e.catch(9),s=!0,u=e.t2;case 111:if(e.prev=111,e.prev=112,c||null==d.return){e.next=116;break}return e.next=116,d.return();case 116:if(e.prev=116,!s){e.next=119;break}throw u;case 119:return e.finish(116);case 120:return e.finish(111);case 121:Z(n);case 122:case"end":return e.stop()}}),e,null,[[9,107,111,121],[25,42,46,56],[47,,51,55],[65,83,87,97],[88,,92,96],[112,,116,120]])})));return function(t,n){return e.apply(this,arguments)}}();return(0,r.jsxs)("div",{className:"container-product-slider",id:"".concat(x,"-product-").concat(k),children:[(0,r.jsx)("div",{className:"icon-arrow arrow-left ".concat(0==S?"hide":""),onClick:function(e){e.preventDefault();var t=S-3;t<0&&(t=0),P(t)},children:(0,r.jsx)("i",{className:"ldicon-chevron-left"})}),(0,r.jsx)("div",{className:"icon-arrow arrow-right ".concat(S>=a.length-3?"hide":""),onClick:function(e){e.preventDefault();var t=S+3;t>a.length-3&&(t=a.length-3),t<0&&(t=0),P(t)},children:(0,r.jsx)("i",{className:"ldicon-chevron-right"})}),a.map((function(e,t){if(t<S)return null;var i=v.Z.hasAtLeastOneVariantAvailable(e.variants);m.Z.parseInt(e.average_point||0);return(0,r.jsx)("div",{className:"product-slider-item ".concat(a.length>=4?"more":""," product-scroll "),onClick:function(t){t.preventDefault(),function(e,t){y(p.Z.setShowLoading(!0));var n="".concat(O,"/detail/").concat(m.Z.getSlug(e,t)),r=w.query;E==h.ZP.PATH_TYPE.PRODUCT&&(n="/".concat(t)),delete r.page_checkout_path,delete r.keyword,delete r.product,delete r.cart_token,delete r.checkout_token,delete r.product,w.push({pathname:n,query:r})}(e.name,e.product_id)},children:(0,r.jsxs)("div",{className:"item-content-product",children:[n&&(0,r.jsx)("div",{className:"star",children:(0,r.jsx)("i",{className:"ldicon-none-colored-star-8"})}),(0,r.jsx)("div",{className:"thumb",children:(0,r.jsx)("img",{className:"product-image",src:m.Z.getImageUrl(e.src,!1,"s500"),alt:"product-image",onError:function(e){var t=e.currentTarget;t.onerror=null,t.src="".concat(m.Z.getImageUrl(""))}})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"product-name",children:e.name}),(0,r.jsxs)("div",{className:"flex-center-between mt-12",children:[(0,r.jsxs)("div",{className:"product-price",children:[(0,r.jsx)("div",{children:e.min_price>0?m.Z.formatMoneyPostFix(e.min_price,N.currency_symbol):(0,d.t)("MSG.FREE")}),e.min_compare>0&&(0,r.jsx)("div",{className:"product-price-compare",children:m.Z.formatMoneyPostFix(e.min_compare,N.currency_symbol)})]}),i&&(0,r.jsx)("i",{className:"ldicon-circle-add",onClick:function(t){return j(t,e)}})]})]})]})},t)}))]})}}}]);