(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4105],{24105:function(e,t,a){"use strict";a.d(t,{Z:function(){return b}});var n=a(85893),r=a(809),c=a.n(r),i=a(26265),s=a(92447),o=a(80711),u=a(67294),l=a(11163),d=(a(49422),a(96365)),p=a(48142),_=a(96463),m=a(65004),v=a(86644),h=a(96630),f=a(42012),P=a(56732),x=a(97673),y=(a(78231),a(113)),T=a(65863),k=a(60248),E=a(53988);function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function g(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){(0,i.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e){var t=e.onClose,a=(e.currencySymbol,e.productInfo),r=e.setBuySuccess,i=(0,p.$)(),C=i.t,b=i.i18n,j=(0,l.useRouter)(),R=(0,d.I0)(),O=(0,d.v9)((function(e){return e.storeReducer})),D=(0,d.v9)((function(e){return e.defaultReducer})),Z=(0,d.v9)((function(e){return e.cartReducer})),S=(0,u.useState)(""),N=S[0],A=S[1],U=(0,u.useState)(""),I=(U[0],U[1]),w=a.options||[],q=a.variants||[],Y=(0,u.useMemo)((function(){return D.pathType||""}),[D.pathType]),M=(0,u.useMemo)((function(){return D.pathRoot||""}),[D.pathRoot]),V=(0,u.useMemo)((function(){return O.checkoutConfigID||""}),[O.checkoutConfigID]),L=(0,u.useMemo)((function(){return O.productVariantSelect||{}}),[O.productVariantSelect]),G=T.Z.isAvailable(L),H=(0,u.useMemo)((function(){return O.info_store||{}}),[O.info_store]),K=(0,u.useMemo)((function(){return O.isBuyNow||!1}),[O.isBuyNow]),F=(0,u.useMemo)((function(){return Z.carts||[]}),[Z.carts]),B=(L.up_sell_variants,(L.optionSelects||[]).map((function(e){return e.value})));v.ZP.listTypeService.includes(L.product_type)&&(B=[L.option_name]);var X=function(){var e=(0,s.Z)(c().mark((function e(t,a){var n,r,i,s,u,l,d,p,v,h,f,P,x,y,T,k,E,C,b,j,O,D,Z,S,N,U,I;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=g({},L),A(""),r=n.optionSelects,i={product_src:n.product_src},r[a]=t,s=!0,u=!1,e.prev=7,d=(0,o.Z)(q);case 9:return e.next=11,d.next();case 11:return p=e.sent,s=p.done,e.next=15,p.value;case 15:if(v=e.sent,s){e.next=98;break}if(f=!1,!(h=v).options){e.next=92;break}f=!0,P=!0,x=!1,e.prev=23,T=(0,o.Z)(h.options);case 25:return e.next=27,T.next();case 27:return k=e.sent,P=k.done,e.next=31,k.value;case 31:if(E=e.sent,P){e.next=76;break}C=E,b=!1,j=!0,O=!1,e.prev=37,Z=(0,o.Z)(r);case 39:return e.next=41,Z.next();case 41:return S=e.sent,j=S.done,e.next=45,S.value;case 45:if(N=e.sent,j){e.next=54;break}if((U=N).option_id!=C.option_id||U.option_value_id!=C.option_value_id){e.next=51;break}return b=!0,e.abrupt("break",54);case 51:j=!0,e.next=39;break;case 54:e.next=60;break;case 56:e.prev=56,e.t0=e.catch(37),O=!0,D=e.t0;case 60:if(e.prev=60,e.prev=61,j||null==Z.return){e.next=65;break}return e.next=65,Z.return();case 65:if(e.prev=65,!O){e.next=68;break}throw D;case 68:return e.finish(65);case 69:return e.finish(60);case 70:if(b){e.next=73;break}return f=!1,e.abrupt("break",76);case 73:P=!0,e.next=25;break;case 76:e.next=82;break;case 78:e.prev=78,e.t1=e.catch(23),x=!0,y=e.t1;case 82:if(e.prev=82,e.prev=83,P||null==T.return){e.next=87;break}return e.next=87,T.return();case 87:if(e.prev=87,!x){e.next=90;break}throw y;case 90:return e.finish(87);case 91:return e.finish(82);case 92:if(!f){e.next=95;break}return i=h,e.abrupt("break",98);case 95:s=!0,e.next=9;break;case 98:e.next=104;break;case 100:e.prev=100,e.t2=e.catch(7),u=!0,l=e.t2;case 104:if(e.prev=104,e.prev=105,s||null==d.return){e.next=109;break}return e.next=109,d.return();case 109:if(e.prev=109,!u){e.next=112;break}throw l;case 112:return e.finish(109);case 113:return e.finish(104);case 114:I=0,i&&(i.optionSelects=r,I=n.quantitySelect,i.min_buy&&I<i.min_buy&&(I=i.min_buy),I<1&&(I=1),i.max_buy&&I>i.max_buy&&(I=i.max_buy),i.inventory_checked&&!i.allow_sold_out&&I>i.quantity&&(I=i.quantity)),i.quantitySelect=I,i.up_sell_variants=n.up_sell_variants,R(_.Z.setData(m.PX,i));case 119:case"end":return e.stop()}}),e,null,[[7,100,104,114],[23,78,82,92],[37,56,60,70],[61,,65,69],[83,,87,91],[105,,109,113]])})));return function(t,a){return e.apply(this,arguments)}}(),$=function(e){var t=g({},L),a=t.rest_quantity,n=C("PRODUCT.PRODUCT_CART");switch(t.product_type){case v.ZP.PRODUCT_TYPE.EVENT:n=C("PRODUCT.TICKET");break;case v.ZP.PRODUCT_TYPE.SERVICE:n=C("PRODUCT.PACKAGE");break;case v.ZP.PRODUCT_TYPE.DIGITAL:n=C("PRODUCT.VERSION")}t.min_buy&&e<t.min_buy?A(C("PRODUCT.MIN_BUY",t.min_buy,n)):t.max_buy&&e>t.max_buy?A(C("PRODUCT.MAX_BUY",t.max_buy,n)):t.inventory_checked&&!t.allow_sold_out&&e>a?A(C("PRODUCT.MAX_BUY",a,n)):(A(""),e<1&&(e=1),t.quantitySelect=e,R(_.Z.setData(m.PX,t)))},Q=function(){var e=(0,s.Z)(c().mark((function e(t){var a,n,i,s,o,u,l,d,p,x,y;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),L&&L.product_variant_id){e.next=3;break}return e.abrupt("return");case 3:return a=g(g({},L),{},{upSellSelects:L.up_sell_variants.filter((function(e){return e.isCheck}))}),R(h.Z.setShowLoading(!0)),n={domain:P.Z.getDomainStore(j.query.domain_xxx),path:j.query.page_checkout_path,path_type:Y||v.ZP.PATH_TYPE.PAGE_STORE,checkout_config_id:V,product_variant_id:L.product_variant_id,quantity:L.quantitySelect,up_sell_ids:a.upSellSelects.map((function(e){return e.product_variant_id})),lang:b.language,discount_code:j.query.discountCode},i="/".concat(j.query.page_checkout_path),Y==v.ZP.PATH_TYPE.PAGE_CHECKOUT&&(i="/page/".concat(j.query.page_checkout_path)),s={"Content-Type":"application/json","cart-token":P.Z.getCookie(v.ZP.CART_TOKEN,i)},K&&(s["cart-token"]=""),e.next=12,k.Z.post(v.FP.ADD_TO_CART,n,R,s);case 12:if(200===(o=e.sent).code){e.next=15;break}return e.abrupt("return");case 15:o.data.cart_token&&!K&&P.Z.setCheckoutAndCartToken(o.data.checkout_token,o.data.cart_token,i),K||r(!0),u={email:"",phone:""},P.Z.trackingProduct(v.ZP.tiktok_tracking_event.add_to_cart,a,a.quantitySelect,H.currency_code,u,H.country_code),R(_.Z.setData(m.qO,!1)),P.Z.startOverFlow(),R(_.Z.setData(m.EH,o.data.totalCart||0)),R(_.Z.setData(m.PX,{})),R(h.Z.setShowLoading(!1)),K?(R(h.Z.setShowLoading(!0)),p=o.data.checkout_token,x="".concat(M,"/checkouts/").concat(p),y=j.query,Y==v.ZP.PATH_TYPE.PRODUCT&&(x="".concat(M,"/checkouts/").concat(p)),Y==v.ZP.PATH_TYPE.PAGE_CHECKOUT&&(x="".concat(M,"/checkouts/").concat(p)),delete y.page_checkout_path,delete y.keyword,delete y.product,delete y.cart_token,delete y.checkout_token,delete y.product,j.push({pathname:x,query:y})):(l={domain:P.Z.getDomain(),lang:b.language,path:j.query.page_checkout_path,path_type:Y||v.ZP.PATH_TYPE.PAGE_STORE},d={"Content-Type":"application/json","cart-token":o.data.cart_token},R(f.Z.show(l,d)));case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=(0,s.Z)(c().mark((function e(t){var n,r,i,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=g({},L),A(""),r=n.rest_quantity,i=a.variants[t],s=n.quantitySelect,n.min_buy&&s<n.min_buy&&(s=n.min_buy),s<1&&(s=1),n.max_buy&&s>n.max_buy&&(s=n.max_buy),n.inventory_checked&&!n.allow_sold_out&&s>r&&(s=r),i.quantitySelect=s,i.up_sell_variants=n.up_sell_variants,R(_.Z.setData(m.PX,i));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,n.jsx)("div",{className:"ladiui modal ".concat("open"," modal-add-to-cart-desktop"),children:(0,n.jsx)("div",{className:"ladiui modal-dialog content-modal-trial",style:{width:800},children:(0,n.jsxs)("div",{className:"ladiui modal-content",style:{width:800},children:[(0,n.jsxs)("div",{className:"ladiui modal-header custom",children:[(0,n.jsx)("h2",{className:"ladiui modal-title",children:C("CART_V4.ADD_CART")}),(0,n.jsx)("button",{"data-dismiss":"modal","data-target":"modal-policy",className:"ladiui modal-close",onClick:t,children:(0,n.jsx)("i",{className:"ladiui icon icon-ldp-close"})})]}),(0,n.jsx)("div",{className:"ladiui modal-body",children:(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"product-info",children:[(0,n.jsxs)("div",{className:"flex-center image-price-option",children:[(0,n.jsx)("img",{className:"product-image",src:P.Z.getImageUrl(L.src||L.product_src,!1,"s500"),alt:"variant-image"}),(0,n.jsxs)("div",{className:"price-option",children:[(0,n.jsx)("h3",{className:"ladiui",children:L.product_name||a.name}),(0,n.jsx)("div",{className:"price-item",children:G?(0,n.jsxs)("div",{className:"ladiiui flex gap-12",children:[L.price>0?(0,n.jsx)("span",{children:P.Z.formatMoneyPostFix(L.price,H.currency_symbol)}):(0,n.jsxs)("span",{className:"ladiui text-danger",children:[C("MSG.FREE")," "]}),L.price_compare>0&&(0,n.jsx)("span",{className:"price-compare",children:P.Z.formatMoneyPostFix(L.price_compare,H.currency_symbol)})]}):(0,n.jsxs)("span",{className:"ladiui text-danger",children:[" ",C("MSG.SOLD_OUT")]})}),(0,n.jsx)("div",{className:"variant-name ladiui text-16",children:B.join(",")})]})]}),(0,n.jsxs)("div",{className:"product-content",children:[[v.ZP.PRODUCT_TYPE.PHYSICAL,v.ZP.PRODUCT_TYPE.COMBO,v.ZP.PRODUCT_TYPE.FB].includes(a.type)&&w&&w.length>0&&(0,n.jsx)("div",{className:"option-list",children:w.map((function(e,t){var a=L.optionSelects?L.optionSelects.find((function(t){return t.option_id==e.option_id})):{};return(0,n.jsx)(x.Z,{info:e,optionSelects:a,changeOption:function(e){X(e,t)}},t)}))}),[v.ZP.PRODUCT_TYPE.COURSE,v.ZP.PRODUCT_TYPE.DIGITAL,v.ZP.PRODUCT_TYPE.EVENT].includes(a.type)&&(0,n.jsx)(y.Z,{productType:a.type,changeVariantSelect:z,info:q,variantSelect:L}),v.ZP.PRODUCT_TYPE.SERVICE==a.type&&(0,n.jsx)(E.Z,{product:a,infoStore:H}),v.ZP.PRODUCT_TYPE.SERVICE!=a.type&&(0,n.jsxs)("div",{className:"content-container-quantity",children:[(0,n.jsxs)("div",{className:"container-quantity",children:[(0,n.jsx)("h3",{className:"ladiui text-16 text-w600",children:C("PRODUCT.QUANTITY")}),[v.ZP.PRODUCT_TYPE.COURSE,v.ZP.PRODUCT_TYPE.DIGITAL].includes(L.product_type)?(0,n.jsx)("div",{children:"1"}):(0,n.jsxs)("div",{className:"group-change-quantity",children:[(0,n.jsx)("div",{className:"btn-quantity-img p-8",onClick:function(){return $(L.quantitySelect-1)},children:(0,n.jsx)("i",{className:"ldicon-subtract-quantity"})}),(0,n.jsx)("input",{type:"number",className:"input-quantity",min:1,value:L.quantitySelect||1,onChange:function(e){return $(e.target.value)}}),(0,n.jsx)("div",{className:"btn-quantity-img p-8",onClick:function(){return $(L.quantitySelect+1)},children:(0,n.jsx)("i",{className:"ldicon-add-quantity"})})]})]}),N&&(0,n.jsx)("div",{className:"show-err-qty pb-16",children:(0,n.jsxs)("div",{className:"valid-error",children:[(0,n.jsx)("i",{className:"ldicon-warning mr-8"}),(0,n.jsxs)("span",{children:[N," "]})]})})]})]}),v.ZP.PRODUCT_TYPE.SERVICE!=a.type&&(0,n.jsx)("div",{className:"container-confirm",children:G?(0,n.jsx)("button",{onClick:function(e){if(e.preventDefault(),L&&L.product_variant_id){if([v.ZP.PRODUCT_TYPE.EVENT,v.ZP.PRODUCT_TYPE.SERVICE,v.ZP.PRODUCT_TYPE.DIGITAL].includes(L.product_type)&&a.select_many_service==v.ZP.STATUS.INACTIVE&&F.find((function(e){return e.product_id==L.product_id&&e.product_variant_id!=L.product_variant_id}))){var t=C("PRODUCT.PRODUCT_CART");return a.type==v.ZP.PRODUCT_TYPE.EVENT&&(t=C("PRODUCT.TICKET")),a.type==v.ZP.PRODUCT_TYPE.SERVICE&&(t=C("PRODUCT.PACKAGE")),a.type==v.ZP.PRODUCT_TYPE.DIGITAL&&(t=C("PRODUCT.VERSION")),void I(C("PAGE_STORE.PRODUCT_DETAIL.NO_SELECT_MANY",a.name,t,t))}Q(e)}},children:C("MSG.ADD_TO_CART")}):(0,n.jsxs)("div",{className:"variant-sold-out",children:[" ",C("MSG.SOLD_OUT")]})})]})})})]})})})}},42858:function(e,t,a){"use strict";a(85893),a(67294),a(11163),a(96365);var n=a(30381),r=a.n(n);a(56732);r().locale("vi")},53988:function(e,t,a){"use strict";a.d(t,{Z:function(){return k}});var n=a(85893),r=a(809),c=a.n(r),i=a(92447),s=a(67294),o=a(11163),u=a(48142),l=a(96365),d=a(30381),p=a.n(d),_=a(60248),m=a(56732),v=a(86644),h=a(97926),f=a(42012),P=a(65863),x=(a(42858),a(78231)),y=a(36995);function T(e){(0,l.I0)();var t=(0,u.$)(),a=t.t,r=(t.i18n,(0,o.useRouter)(),e.description),c=(0,s.useState)(!1),i=c[0],d=c[1],p=(0,s.useState)(!1),_=p[0],m=p[1],v=(0,s.useRef)(),h=(0,s.useRef)();(0,s.useEffect)((function(){document.addEventListener("click",f),v&&v.current&&v.current.offsetHeight>38&&d(!0)}),[]);var f=function(e){var t=e.target;h&&h.current&&!h.current.contains(t)&&m(!1)};return(0,n.jsxs)("div",{className:"package-des ".concat(_?"active":""),children:[(0,n.jsx)("div",{ref:v,className:"ladiui package-des-short",dangerouslySetInnerHTML:{__html:r}}),i&&(0,n.jsxs)("div",{className:"btn-see-more",children:[(0,n.jsx)("div",{onClick:function(e){e.preventDefault(),e.stopPropagation(),m(!_)},children:"... [+] ".concat(a("PRODUCT.SEE_MORE"))}),_&&(0,n.jsx)("div",{className:"popover-des",ref:h,children:(0,n.jsx)("div",{className:"ladiui package-des-short",dangerouslySetInnerHTML:{__html:r}})})]})]})}function k(e){var t=(0,l.I0)(),a=(0,u.$)(),r=a.t,d=a.i18n,p=(0,o.useRouter)(),k=e.product,E=void 0===k?{}:k,C=e.infoStore,g=void 0===C?{}:C,b=(0,s.useState)(!1),j=b[0],R=b[1],O=(0,s.useState)(!1),D=O[0],Z=O[1],S=(0,l.v9)((function(e){return e.cartReducer})),N=(0,l.v9)((function(e){return e.defaultReducer})),A=(0,s.useMemo)((function(){return S.variantSelected||{}}),[S.variantSelected]),U=(0,s.useMemo)((function(){return N.pathType||""}),[N.pathType]),I=(0,s.useMemo)((function(){return N.pathRoot||""}),[N.pathRoot]),w=(0,s.useMemo)((function(){var e=P.Z.getPackages(E.options,E.variants,g.currency_symbol);return e.packageAvaiable&&t(f.Z.setData(h.SET_VARIANT_SELECTED,e.packageAvaiable)),R(e.isImage),e.packages||[]}),[E.options,E.variants,g.currency_symbol]),q=function(){var e=(0,i.Z)(c().mark((function e(){var a,n,r,i,s,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=1,A&&A.product_variant_id){e.next=3;break}return e.abrupt("return");case 3:return n={domain:m.Z.getDomain(),path:p.query.page_checkout_path,path_type:U||v.ZP.PATH_TYPE.PRODUCT,product_variant_id:A.product_variant_id,quantity:a,up_sell_ids:[],lang:d.language,ladifd:p.query.ladifd||m.Z.getCookie("ladisale-ladifd")},r={"Content-Type":"application/json","cart-token":m.Z.getCookie(v.ZP.CART_TOKEN)},e.next=7,_.Z.post(v.FP.ADD_TO_CART,n,t,r);case 7:if(200===(i=e.sent).code){e.next=10;break}return e.abrupt("return");case 10:i.data.cart_token&&(Z(!0),m.Z.setCheckoutAndCartToken(i.data.checkout_token,i.data.cart_token,I)),s={email:"",phone:""},m.Z.trackingProduct(v.ZP.tiktok_tracking_event.add_to_cart,A,a,g.currency_code,s,g.country_code),o={domain:m.Z.getDomain(),lang:d.language,path:p.query.page_checkout_path,path_type:U||v.ZP.PATH_TYPE.PRODUCT},t(f.Z.show(o));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(e){if(E.variants){var a=E.variants.find((function(t){return t.product_variant_id==e.product_variant_id}));a&&t(f.Z.setData(h.SET_VARIANT_SELECTED,a))}};return(0,n.jsxs)("div",{className:"desktop-layout-item package-layout",children:[D&&(0,n.jsx)(y.Z,{visible:D,close:function(){return Z(!1)}}),(0,n.jsx)("div",{className:"ladiui desktop-layout-item-label",children:r("SERVICE_V4.PACKAGE_LABEL")}),(0,n.jsx)("div",{className:"package-list",children:w.map((function(e,t){var a;a=m.Z.getImageUrl(e.src,!1,"s500");var c=!1;A.options&&A.options[0].option_value_id==e.option_value_id&&(c=!0);var i=e.options;return(0,n.jsx)("div",{className:"pos-rel package-item ".concat(c?"active":""),children:(0,n.jsxs)("div",{className:"package-item-info",children:[j&&a&&(0,n.jsx)("img",{className:"package-image",src:a,alt:"package-image"}),(0,n.jsxs)("div",{className:"package-item-info-detail",children:[(0,n.jsx)("div",{className:"ladiui package-name",children:e.package_name}),(e.description||e.content)&&(0,n.jsx)(T,{description:e.description?e.description:e.content}),e.optionAvaiable?(0,n.jsxs)(n.Fragment,{children:[!c&&(0,n.jsxs)("div",{className:"package-item-action",children:[(0,n.jsxs)("div",{className:"package-price-from",children:[(0,n.jsx)("span",{children:i&&1!=i.length?"".concat(r("SERVICE_V4.PRICE_FROM"),": "):""}),(0,n.jsx)("span",{className:"ladiui text-w600",children:m.Z.formatMoneyPostFix(e.min_price,g.currency_symbol)})]}),(0,n.jsxs)("div",{className:"ladiui btn btn-package-select",onClick:function(){Y(e.options[0])},children:[(0,n.jsx)("i",{className:"ladiui icon-new ldicon-circle-add-btn"}),(0,n.jsx)("span",{children:r("SERVICE_V4.SELECT_PACKAGE")})]})]}),c&&(0,n.jsxs)("div",{className:"package-item-action",children:[i&&1!=i.length?(0,n.jsx)("div",{children:(0,n.jsx)(x.Z,{data:i,_key:"product_variant_id",_value:"option_name",_key_sold_out:"available",currentKey:A.product_variant_id,onSelectItem:function(e){Y(e)}})}):(0,n.jsx)("div",{className:"package-value-one",children:"".concat(i[0].package_quantity," ").concat(e.package_quantity_unit," (").concat(m.Z.formatMoneyPostFix(i[0].price,g.currency_symbol),")")}),(0,n.jsxs)("div",{className:"ladiui btn btn-add-cart btn-primary ",onClick:q,children:[(0,n.jsx)("i",{className:"ladiui icon-new ldicon-circle-add-btn mr-4"}),(0,n.jsx)("span",{children:r("PAGE_STORE.PRODUCT_DETAIL.BTN_ADD_CART")})]})]})]}):(0,n.jsxs)("div",{className:"ladiui package-name text-danger",children:[" ",r("SERVICE_V4.SOLD_OUT_PACKAGE")," "]})]})]})},t)}))})]})}p().locale("vi"),p().locale("vi")}}]);